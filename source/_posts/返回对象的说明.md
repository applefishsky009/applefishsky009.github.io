---
title: 返回对象的说明
date: 2016-05-26 11:30:28
category: C++的类
tags: 返回对象

---

有三种可选择的返回对象，返回对象的`const`引用，返回对象的非`const`引用，返回`const`对象。返回对象。简单来说就是两个问题,是对象还是引用?是`const`还是非`const`?

---

## 返回对象的`const`引用

返回引用提高效率
1. 返回对象调用复制构造函数，返回引用不会，效率更高；
2. 引用指向的对象在调用函数执行时存在(否则返回时释放会出现野指针);
3. 注意返回类型可能与传入的某种类型匹配。

---

## 返回指向非`const`对象的引用

主要是返回对象能不能修改，常见两种情况，重载赋值运算符`=`，重载与`cout`一起使用的`<<`运算符;
1. 重载`=`是为了提高效率，用于连续赋值；
2. 重载`<<`(与`cout`一起使用)必须这样做，因为用于连续输出时对象会发生变化。

---

## 返回`const`对象

使用`const`对象将其声明为不可修改的左值防止被覆盖，不希望被覆盖的量如果不声明为`const`经常会引发误用和滥用。
1. 不可修改的左值防止被覆盖。

---

## 返回对象

返回局部变量不能用引用，这是一个可修改的值或者需要赋值给一个非`const`变量，则会适用对象。
1. 算术运算符重载。

---

简单回答开头所提出的问题，
1. 是不是`const`要看返回对象允许不允许赋值,对象有没有改变的必要性,能用`const`绝对不要不用,**有趣的是**,上述分析中，运算符重载都是非`const`。
2. 是不是引用取决于能不能返回引用(可不可以复制)，能返回引用一定要返回引用来提高效率(返回对象有拷贝过程),返回局部变量才不能用引用，否则会出现野指针。

---

## 函数原型中的const

1. 函数参数中的`const`表示表示函数不会修改调用的参数值；
2. 函数头的`const`表示其返回对象是否可修改；
3. 参数列表后花括号前的`const`表示函数不会修改其访问对象的值(虽然参数声明为`const`其不能显式修改，但不能保证参数的成员函数隐式修改其值)。举例：
```C++
cosnt int sum (const shape &shape1) const { 
shape1.memberFunc1;
return 1；
}
```
