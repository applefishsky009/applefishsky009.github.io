---
title: 默认参数与内联函数
date: 2016-04-19 11:15:10
category: C++基础
tags: [默认参数,内联函数]

---

## 默认参数

省略实参时自动使用的值，必须通过函数原型(这是因为函数调用时通过函数原型将函数参数压入栈帧)，使用方法是将值赋给原型中的值(压入栈帧并初始化)。 

---

## 内联函数

常规函数和内联函数之间的主要区别是C++编译器如何将它们组合到程序中去。
### C语言的宏
宏是内联代码的原始实现，它的本质是**文本替换**
1. 普通宏定义中，预处理器将空格解释成分段标志；
2. `##`是一种分隔连接方式，作用是先分隔后强制连接；
3. `#`表示变量替换后加双引号括起来。
4. 另外一些分隔符、操作符如`+`、`-`、`*`、`/`、`[`、`]`依然有意义。
 
```
#define A1(name,type) type name_##type##_type
	A1(a1,int) <=> int name_int_type
#define A1(name,type) type name##_##type##_type
	A1(a1,int) <=> int a1_int_type
#define stringify(x) #x
	stringify(linux) <=> "linux"
```
### C++内联函数
1. 编译器将使用相应的函数代码替换函数调用(省略了来回跳跃并记录跳跃位置的过程)；
2. 运行速度较快，但占用更多的内存(同一个内联函数调用多少次，就有多少次副本)；
3. 一般省略原型(但原型特性仍在起作用)，将整个定义放在原本该提供原型的地方(这是首次使用前的函数定义，充当原型)，并使用`inline`关键字
4. 编译器并不一定满足程序员内联函数的请求，比如函数过大或者函数调用了自己(递归不能内联)。

注意类成员函数中的内联函数并不一定使用`inline`关键字。定义位于类声明中自动成为内联函数；否则使用`inline`关键字作为内联函数。